{"ast":null,"code":"import _objectSpread from \"/Users/brendencoleman/Desktop/Dev/stratuswebapp/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/brendencoleman/Desktop/Dev/stratuswebapp/client/src/App.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { saveAs } from \"file-saver\";\nimport Nav from \"./Components/Nav\";\nimport StartForm from \"./Components/Form\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.callBackendAPI = async () => {\n      const response = await fetch('/express_backend');\n      const body = await response.json();\n\n      if (response.status !== 200) {\n        throw Error(body.message);\n      }\n\n      return body;\n    };\n\n    this.handleInputChange = e => {\n      e.preventDefault();\n      const target = e.target;\n      const value = target.type === \"checkbox\" ? target.checked : target.value;\n      const name = target.name;\n      console.log(name, value);\n      this.setState(prevState => ({\n        item: _objectSpread({}, prevState.item, {\n          [name]: value\n        })\n      }));\n    };\n\n    this.onWalkDateChange = date => {\n      this.setState(prevState => ({\n        item: _objectSpread({}, prevState.item, {\n          walkthroughDate: date\n        })\n      }));\n      console.log(date);\n    };\n\n    this.onStartDateChange = date => {\n      this.setState(prevState => ({\n        item: _objectSpread({}, prevState.item, {\n          startDate: date\n        })\n      }));\n      console.log(date);\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.createAndDownloadPdf();\n      const obj = this.state.item;\n      this.createAndSendEmail(obj);\n    };\n\n    this.createAndDownloadPdf = () => {\n      axios.post(\"/create-pdf\", this.state.item).then(() => axios.get(\"/fetch-pdf\", {\n        responseType: \"blob\"\n      })).then(res => {\n        const pdfBlob = new Blob([res.data], {\n          type: 'application/pdf'\n        });\n        saveAs(pdfBlob, 'StratusStartForm.pdf');\n      });\n    };\n\n    this.createAndSendEmail = () => {\n      const from = 'brenden.d.coleman@gmail.com';\n      const toField = [from, this.state.item.email, this.state.item.franchiseeEmail];\n      const account = this.state.item.accountName;\n      const emailData = {\n        from: from,\n        to: toField,\n        subject: 'New Start Form submission',\n        body: \"Testing and testing\",\n        html: \"<strong>and easy to do anywhere, even with Node.js</strong>\"\n      };\n      axios.post('/send-email', emailData).then(res => {\n        console.log(res);\n        console.log(res.data);\n      });\n    };\n\n    this.state = {\n      data: null,\n      item: {\n        id: \"\",\n        email: \"\",\n        personCompleting: \"\",\n        accountName: \"\",\n        contactName: \"\",\n        address: \"\",\n        phoneNumber: \"\",\n        emergencyContact: \"\",\n        emergencyContactNumber: \"\",\n        customerEmail: \"\",\n        billingAddress: \"\",\n        walkthroughDate: new Date(),\n        startDate: new Date(),\n        franchisee: \"\",\n        franchiseeEmail: \"\",\n        daysCleaned: [],\n        timeCleaned: \"\",\n        monthlyBillingAmount: \"\",\n        initialClean: \"\",\n        initialCleanAmount: \"\",\n        buildingEntry: \"\",\n        communicationLogBook: \"\",\n        lightSwitchLocations: \"\",\n        mainPowerShutoff: \"\",\n        alarmSystem: \"\",\n        alarmCode: \"\",\n        storageAreas: \"\",\n        storageKey: \"\",\n        waterLocation: \"\",\n        waterTemp: \"\",\n        suppliesFurnish: \"\",\n        includedSupplies: \"\",\n        trashDisposalLocation: \"\",\n        keyEntry: \"\",\n        restroomSupply: \"\",\n        storageCloset: \"\",\n        commentsText: \"\"\n      }\n    };\n    this.handleInputChange = this.handleInputChange.bind(this); // this.handleCheckmarkChange = this.handleCheckmarkChange.bind(this);\n\n    this.onWalkDateChange = this.onWalkDateChange.bind(this);\n    this.onStartDateChange = this.onStartDateChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    // Call our fetch function below once the component mounts\n    this.callBackendAPI().then(res => this.setState({\n      data: res.express\n    })).catch(err => console.log(err));\n  } // Fetches our GET route from the Express server. (Note the route we are fetching matches the GET route from server.js\n\n\n  render() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(Nav, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Stratus New Account Start Form\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }), React.createElement(StartForm, {\n      item: this.state.item,\n      handleInputChange: this.handleInputChange,\n      onWalkDateChange: this.onWalkDateChange,\n      onStartDateChange: this.onStartDateChange,\n      handleSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/brendencoleman/Desktop/Dev/stratuswebapp/client/src/App.js"],"names":["React","Component","axios","saveAs","Nav","StartForm","App","constructor","props","callBackendAPI","response","fetch","body","json","status","Error","message","handleInputChange","e","preventDefault","target","value","type","checked","name","console","log","setState","prevState","item","onWalkDateChange","date","walkthroughDate","onStartDateChange","startDate","handleSubmit","createAndDownloadPdf","obj","state","createAndSendEmail","post","then","get","responseType","res","pdfBlob","Blob","data","from","toField","email","franchiseeEmail","account","accountName","emailData","to","subject","html","id","personCompleting","contactName","address","phoneNumber","emergencyContact","emergencyContactNumber","customerEmail","billingAddress","Date","franchisee","daysCleaned","timeCleaned","monthlyBillingAmount","initialClean","initialCleanAmount","buildingEntry","communicationLogBook","lightSwitchLocations","mainPowerShutoff","alarmSystem","alarmCode","storageAreas","storageKey","waterLocation","waterTemp","suppliesFurnish","includedSupplies","trashDisposalLocation","keyEntry","restroomSupply","storageCloset","commentsText","bind","componentDidMount","express","catch","err","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { saveAs } from \"file-saver\";\nimport Nav from \"./Components/Nav\";\nimport StartForm from \"./Components/Form\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: null,\n      item: {\n        id: \"\",\n        email: \"\",\n        personCompleting: \"\",\n        accountName: \"\",\n        contactName: \"\",\n        address: \"\",\n        phoneNumber: \"\",\n        emergencyContact: \"\",\n        emergencyContactNumber: \"\",\n        customerEmail: \"\",\n        billingAddress: \"\",\n        walkthroughDate: new Date(),\n        startDate: new Date(),\n        franchisee: \"\",\n        franchiseeEmail: \"\",\n        daysCleaned: [],\n        timeCleaned: \"\",\n        monthlyBillingAmount: \"\",\n        initialClean: \"\",\n        initialCleanAmount: \"\",\n        buildingEntry: \"\",\n        communicationLogBook: \"\",\n        lightSwitchLocations: \"\",\n        mainPowerShutoff: \"\",\n        alarmSystem: \"\",\n        alarmCode: \"\",\n        storageAreas: \"\",\n        storageKey: \"\",\n        waterLocation: \"\",\n        waterTemp: \"\",\n        suppliesFurnish: \"\",\n        includedSupplies: \"\",\n        trashDisposalLocation: \"\",\n        keyEntry: \"\",\n        restroomSupply: \"\",\n        storageCloset: \"\",\n        commentsText: \"\"\n      }\n    };\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n    // this.handleCheckmarkChange = this.handleCheckmarkChange.bind(this);\n    this.onWalkDateChange = this.onWalkDateChange.bind(this);\n    this.onStartDateChange = this.onStartDateChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    // Call our fetch function below once the component mounts\n  this.callBackendAPI()\n    .then(res => this.setState({ data: res.express }))\n    .catch(err => console.log(err));\n}\n  // Fetches our GET route from the Express server. (Note the route we are fetching matches the GET route from server.js\ncallBackendAPI = async () => {\n  const response = await fetch('/express_backend');\n  const body = await response.json();\n\n  if (response.status !== 200) {\n    throw Error(body.message) \n  }\n  return body;\n};\n\n  handleInputChange = e => {\n    e.preventDefault();\n    const target = e.target;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n    const name = target.name;\n    console.log(name, value);\n\n    this.setState(prevState => ({\n      item: { ...prevState.item, [name]: value }\n    }));\n  };\n\n  onWalkDateChange = date => {\n    this.setState(prevState => ({\n      item: { ...prevState.item, walkthroughDate: date }\n    }));\n    console.log(date);\n  };\n\n  onStartDateChange = date => {\n    this.setState(prevState => ({\n      item: { ...prevState.item, startDate: date }\n    }));\n    console.log(date);\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.createAndDownloadPdf();\n    const obj = this.state.item;\n    this.createAndSendEmail(obj);\n  };\n\n  createAndDownloadPdf = () => {\n    axios\n      .post(\"/create-pdf\", this.state.item)\n      .then(() => axios.get(\"/fetch-pdf\", { responseType: \"blob\" }))\n      .then(res => {\n        const pdfBlob = new Blob([res.data],\n          { type: 'application/pdf' });\n          saveAs(pdfBlob, 'StratusStartForm.pdf')\n      });\n  };\n\n  createAndSendEmail = () => {\n    const from = 'brenden.d.coleman@gmail.com';\n    const toField = [from, this.state.item.email, this.state.item.franchiseeEmail];\n    const account = this.state.item.accountName;\n    const emailData = {\n      from: from,\n      to: toField,\n      subject: 'New Start Form submission',\n      body: \"Testing and testing\",\n      html: \"<strong>and easy to do anywhere, even with Node.js</strong>\"\n    };\n  axios.post('/send-email', emailData)\n      .then(res => {\n        console.log(res);\n        console.log(res.data);\n      })\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <Nav />\n        <br />\n        <h1>Stratus New Account Start Form</h1>\n        <br />\n        <StartForm\n          item={this.state.item}\n          handleInputChange={this.handleInputChange}\n          onWalkDateChange={this.onWalkDateChange}\n          onStartDateChange={this.onStartDateChange}\n          handleSubmit={this.handleSubmit}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}